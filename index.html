<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üíú ONE LOTO üíú</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet" />
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(135deg,#4b0082,#800080);
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  min-height:100vh;
  padding:2rem;
}
.card{
  background:#2e003e;
  border-radius:20px;
  padding:2rem;
  max-width:600px;
  width:100%;
  box-shadow:0 0 30px rgba(255,255,255,0.1);
  text-align:center;
  border:2px solid #ffda77;
}
h1{
  font-size:2.2rem;
  color:#ffccff;
  margin-bottom:1rem;
}
label{
  display:block;
  margin-top:1rem;
  font-size:1.1rem;
  color:#ffd700;
  font-weight:600;
  text-align:left;
}
input[type="text"]{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  background:#3b1a57;
  color:#fff;
  font-size:1.1rem;
  margin-top:0.3rem;
}
.cotacoes{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:10px;
  margin-top:1rem;
}
.cota-opcao{
  cursor:pointer;
}
.cota-opcao input{
  display:none;
}
.box-cota{
  background:#3b1a57;
  border-radius:12px;
  padding:15px 0;
  font-weight:700;
  color:#ffda77;
  font-size:1.2rem;
  transition:0.3s;
  border:2px solid transparent;
}
.cota-opcao input:checked + .box-cota{
  background:linear-gradient(135deg,#6b3db0,#a267e8);
  border-color:#ffda77;
  color:#fff;
}
.box-cota.disabled{
  opacity:0.4;
  cursor:not-allowed;
}
button{
  margin-top:1.5rem;
  width:100%;
  padding:15px;
  background:linear-gradient(to right,#ffd700,#ff9a00);
  border:none;
  border-radius:12px;
  font-size:1.2rem;
  font-weight:700;
  color:#000;
  cursor:pointer;
  box-shadow:0 0 15px #ffda77;
  transition:transform 0.3s ease;
}
button:hover{
  transform:scale(1.05);
  box-shadow:0 0 25px #ffd700,0 0 35px #ff9a00;
}
#mensagem{
  margin-top:1rem;
  padding:12px;
  border-radius:12px;
  font-weight:700;
  font-size:1rem;
  display:none;
}
#mensagem.sucesso{background:#4caf50;color:#fff;}
#mensagem.erro{background:#e53935;color:#fff;}
.info-bolao{
  margin-top:20px;
  padding:15px;
  background:#350055;
  border-radius:15px;
  color:#ffd700;
  font-weight:600;
  box-shadow:0 0 15px #ffda77;
  text-align:left;
}
</style>
</head>
<body>

<div class="card">
<h1>üíú ONE LOTO üíú</h1>

<form id="formulario">
<label for="nome">Seu nome:</label>
<input type="text" id="nome" placeholder="Digite seu nome" required>

<label>Escolha sua dezena:</label>
<div class="cotacoes" id="cotacoes"></div>

<button type="submit">‚úÖ Reservar Dezena</button>
</form>

<div id="mensagem"></div>

<div class="info-bolao">
<p>üíú <strong>ONE LOTO</strong> üíú</p>
<p>üí∞ Valor por dezena: R$15,00</p>
<p>üèÜ Pr√™mio: R$263,00</p>
<p>‚ö†Ô∏è Cada dezena s√≥ pode ser comprada uma vez!</p>
</div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycby2akkD-BSWXYtquU9cf9xFGhJV7QNjC6e9-139aLX6VVOAHPtlqORRp7A8rvgqS9c_/exec";
const container = document.getElementById('cotacoes');
const mensagem = document.getElementById('mensagem');

function criarDezenas(reservadas){
  container.innerHTML = "";
  for(let i=1;i<=25;i++){
    const label = document.createElement('label');
    label.className = "cota-opcao";
    const input = document.createElement('input');
    input.type = "radio";
    input.name = "dezena";
    input.value = i;
    const div = document.createElement('div');
    div.className = "box-cota";
    div.textContent = i < 10 ? "0"+i : i;
    if(reservadas.includes(String(i))){
      div.classList.add('disabled');
      input.disabled = true;
    }
    label.appendChild(input);
    label.appendChild(div);
    container.appendChild(label);
  }
}

async function carregarDezenas(){
  const res = await fetch(API_URL);
  const reservadas = await res.json();
  criarDezenas(reservadas);
}

document.getElementById('formulario').addEventListener('submit', async e=>{
  e.preventDefault();
  const nome = document.getElementById('nome').value.trim();
  const dezena = document.querySelector('input[name="dezena"]:checked')?.value;

  if(!nome || !dezena){
    mensagem.textContent = "‚ùå Preencha seu nome e escolha uma dezena.";
    mensagem.className = "erro";
    mensagem.style.display = "block";
    return;
  }

  const dados = {nome, dezena};
  const res = await fetch(API_URL, {
    method: "POST",
    body: JSON.stringify(dados)
  });
  const resultado = await res.json();
  mensagem.textContent = resultado.msg;
  mensagem.className = resultado.status === "ok" ? "sucesso" : "erro";
  mensagem.style.display = "block";
  if(resultado.status === "ok"){
    carregarDezenas();
    document.getElementById('formulario').reset();
  }
});

carregarDezenas();
</script>

</body>
</html>
